{"ast":null,"code":"import React,{useEffect,useRef,useState}from'react';import{useDispatch}from'react-redux';import{handleTablesPagesHistory}from'Storages/SessionStorage';import{setRace}from'store/modules/listReducer';import FinishLine from'components/commons/FinishLine/FinishLine';import GarageTableRow from'components/commons/GarageTableRow/GarageTableRow';import Pagination from'components/commons/Pagination/Pagination';import styles from'./GarageTable.module.scss';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";function GarageTable(_ref){let{list}=_ref;const dispatch=useDispatch();const pageInHistory=handleTablesPagesHistory('getItem',{key:'garageTable'});const visibleitemsCount=7;const maxPageCount=Math.ceil(list.length/visibleitemsCount);const[pageNo,setPageNo]=useState(pageInHistory<=maxPageCount?pageInHistory:maxPageCount);const tableRef=useRef(null);const[startLineStyle,setStartLineStyle]=useState({});const handlePageChange=No=>setPageNo(No);useEffect(()=>{handleTablesPagesHistory('update',{key:'garageTable',newValue:pageNo});dispatch(setRace(false));},[pageNo]);useEffect(()=>{var _tableRef$current,_tableRef$current2;setStartLineStyle({fontSize:\"\".concat(Math.min((tableRef===null||tableRef===void 0?void 0:(_tableRef$current=tableRef.current)===null||_tableRef$current===void 0?void 0:_tableRef$current.offsetHeight)/100*10,24),\"px\"),letterSpacing:\"\".concat(Math.min((tableRef===null||tableRef===void 0?void 0:(_tableRef$current2=tableRef.current)===null||_tableRef$current2===void 0?void 0:_tableRef$current2.offsetHeight)/100*2,10),\"px\")});},[]);return/*#__PURE__*/_jsxs(\"div\",{className:styles.garageTable,ref:tableRef,children:[/*#__PURE__*/_jsxs(\"div\",{className:styles.track,children:[/*#__PURE__*/_jsx(\"span\",{className:styles.startLine,style:startLineStyle,children:\"START\"}),/*#__PURE__*/_jsx(FinishLine,{}),list.slice((pageNo-1)*visibleitemsCount,pageNo*visibleitemsCount).map(car=>/*#__PURE__*/_jsx(GarageTableRow,{carData:car},car.id))]}),list.length>visibleitemsCount?/*#__PURE__*/_jsx(Pagination,{count:list.length,pageNo:pageNo,changePage:No=>handlePageChange(No),visibleitemsCount:visibleitemsCount}):null]});}export default GarageTable;","map":{"version":3,"names":["React","useEffect","useRef","useState","useDispatch","handleTablesPagesHistory","setRace","FinishLine","GarageTableRow","Pagination","styles","jsx","_jsx","jsxs","_jsxs","GarageTable","_ref","list","dispatch","pageInHistory","key","visibleitemsCount","maxPageCount","Math","ceil","length","pageNo","setPageNo","tableRef","startLineStyle","setStartLineStyle","handlePageChange","No","newValue","_tableRef$current","_tableRef$current2","fontSize","concat","min","current","offsetHeight","letterSpacing","className","garageTable","ref","children","track","startLine","style","slice","map","car","carData","id","count","changePage"],"sources":["C:/Users/Admin/Documents/GitHub/Async-Race/src/components/featues/GarageTable/GarageTable.jsx"],"sourcesContent":["import React, { useEffect, useRef, useState } from 'react';\r\nimport { useDispatch } from 'react-redux';\r\n\r\nimport { handleTablesPagesHistory } from 'Storages/SessionStorage';\r\nimport { setRace } from 'store/modules/listReducer';\r\n\r\nimport FinishLine from 'components/commons/FinishLine/FinishLine';\r\nimport GarageTableRow from 'components/commons/GarageTableRow/GarageTableRow';\r\nimport Pagination from 'components/commons/Pagination/Pagination';\r\n\r\nimport styles from './GarageTable.module.scss';\r\n\r\nfunction GarageTable({ list }) {\r\n   const dispatch = useDispatch();\r\n   const pageInHistory = handleTablesPagesHistory('getItem', {\r\n      key: 'garageTable',\r\n   });\r\n   const visibleitemsCount = 7;\r\n   const maxPageCount = Math.ceil(list.length / visibleitemsCount);\r\n   const [pageNo, setPageNo] = useState(\r\n      pageInHistory <= maxPageCount ? pageInHistory : maxPageCount\r\n   );\r\n   const tableRef = useRef(null);\r\n   const [startLineStyle, setStartLineStyle] = useState({});\r\n   const handlePageChange = (No) => setPageNo(No);\r\n\r\n   useEffect(() => {\r\n      handleTablesPagesHistory('update', {\r\n         key: 'garageTable',\r\n         newValue: pageNo,\r\n      });\r\n      dispatch(setRace(false));\r\n   }, [pageNo]);\r\n\r\n   useEffect(() => {\r\n      setStartLineStyle({\r\n         fontSize: `${Math.min((tableRef?.current?.offsetHeight / 100) * 10, 24)}px`,\r\n         letterSpacing: `${Math.min((tableRef?.current?.offsetHeight / 100) * 2, 10)}px`,\r\n      });\r\n   }, []);\r\n\r\n   return (\r\n      <div className={styles.garageTable} ref={tableRef}>\r\n         <div className={styles.track}>\r\n            <span className={styles.startLine} style={startLineStyle}>\r\n               START\r\n            </span>\r\n            <FinishLine />\r\n            {list\r\n               .slice(\r\n                  (pageNo - 1) * visibleitemsCount,\r\n                  pageNo * visibleitemsCount\r\n               )\r\n               .map((car) => (\r\n                  <GarageTableRow key={car.id} carData={car} />\r\n               ))}\r\n         </div>\r\n         {list.length > visibleitemsCount ? (\r\n            <Pagination\r\n               count={list.length}\r\n               pageNo={pageNo}\r\n               changePage={(No) => handlePageChange(No)}\r\n               visibleitemsCount={visibleitemsCount}\r\n            />\r\n         ) : null}\r\n      </div>\r\n   );\r\n}\r\n\r\nexport default GarageTable;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}