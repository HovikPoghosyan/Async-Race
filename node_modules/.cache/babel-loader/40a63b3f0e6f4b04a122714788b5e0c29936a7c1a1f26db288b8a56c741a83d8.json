{"ast":null,"code":"import { createSlice, createAsyncThunk } from '@reduxjs/toolkit';\nimport { fetchGarageList, fetchWinnersList } from 'CONSTANTS/Axios';\nconst getGarageList = createAsyncThunk('list/getGarageList', async (props, {\n  rejectWithValue,\n  dispatch\n}) => {\n  const garageList = await fetchGarageList();\n  if (garageList.isFailed) return rejectWithValue();\n  const winnersData = await dispatch(getWinnersList()).unwrap();\n  if (winnersData.isFailed) return rejectWithValue();\n  const resultList = garageData.map(car => {\n    var _winner$wins, _winner, _winner$time, _winner2;\n    const wins = winnersData.find(current => current.id === car.id);\n    return {\n      ...car,\n      wins: (_winner$wins = (_winner = winner) === null || _winner === void 0 ? void 0 : _winner.wins) !== null && _winner$wins !== void 0 ? _winner$wins : 0,\n      time: (_winner$time = (_winner2 = winner) === null || _winner2 === void 0 ? void 0 : _winner2.time) !== null && _winner$time !== void 0 ? _winner$time : null\n    };\n  });\n  return data;\n});\nconst getWinnersList = createAsyncThunk('list/getWinnersList', async (props, {\n  rejectWithValue\n}) => {\n  const data = await fetchWinnersList();\n  if (data.isFailed) return rejectWithValue();\n  return data;\n});\nconst initialState = {\n  garageList: [],\n  winnersList: [],\n  loading: false\n};\nconst appSlice = createSlice({\n  name: 'list',\n  initialState,\n  reducers: {\n    setGarageList(state, {\n      payload\n    }) {\n      state.garageList = payload;\n    }\n  },\n  extraReducers: builder => {\n    builder.addCase(getGarageList.pending, state => {\n      state.loading = true;\n    }).addCase(getGarageList.fulfilled, (state, {\n      payload\n    }) => {\n      state.garageList = payload;\n      // state.loading = false;\n    }).addCase(getGarageList.rejected, state => {\n      // state.loading = false;\n    }).addCase(getWinnersList.pending, state => {\n      state.loading = true;\n    }).addCase(getWinnersList.fulfilled, (state, {\n      payload\n    }) => {\n      state.garageList = payload;\n      state.loading = false;\n    }).addCase(getWinnersList.rejected, state => {\n      state.loading = false;\n    });\n  }\n});\nexport const {\n  setGarageList\n} = appSlice.actions;\nexport { getGarageList, getWinnersList };\nexport default appSlice.reducer;","map":{"version":3,"names":["createSlice","createAsyncThunk","fetchGarageList","fetchWinnersList","getGarageList","props","rejectWithValue","dispatch","garageList","isFailed","winnersData","getWinnersList","unwrap","resultList","garageData","map","car","_winner$wins","_winner","_winner$time","_winner2","wins","find","current","id","winner","time","data","initialState","winnersList","loading","appSlice","name","reducers","setGarageList","state","payload","extraReducers","builder","addCase","pending","fulfilled","rejected","actions","reducer"],"sources":["C:/Users/Admin/Documents/GitHub/Async-Race/src/store/modules/listReducer.js"],"sourcesContent":["import { createSlice, createAsyncThunk } from '@reduxjs/toolkit';\n\nimport { fetchGarageList, fetchWinnersList } from 'CONSTANTS/Axios';\n\n\nconst getGarageList = createAsyncThunk( \n   'list/getGarageList',\n   async ( props, { rejectWithValue, dispatch } ) => {\n      const garageList = await fetchGarageList( );\n\n      if ( garageList.isFailed ) return rejectWithValue();\n      \n      const winnersData = await dispatch( getWinnersList() ).unwrap()\n      if ( winnersData.isFailed ) return rejectWithValue();\n\n      const resultList = garageData.map( car => {\n         const wins = winnersData.find( current => current.id === car.id)\n         return {\n            ...car,\n            wins: winner?.wins ?? 0,\n            time: winner?.time ?? null,\n         }\n      })\n\n      return data;\n   }\n); \n\nconst getWinnersList = createAsyncThunk( \n   'list/getWinnersList',\n   async ( props, { rejectWithValue } ) => {\n      const data = await fetchWinnersList( );\n\n      if ( data.isFailed ) return rejectWithValue();\n\n      return data;\n   }\n); \n\nconst initialState = {\n   garageList: [],\n   winnersList: [],\n   loading: false,\n};\n\nconst appSlice = createSlice({\n   name: 'list',\n   initialState,\n   reducers: {\n      setGarageList( state, { payload } ) {\n         state.garageList = payload;\n      },\n   },\n   extraReducers: ( builder ) => {\n      builder\n      .addCase( getGarageList.pending, ( state ) => {\n         state.loading = true;\n      })\n      .addCase( getGarageList.fulfilled, ( state, { payload } ) => {\n         state.garageList = payload;\n         // state.loading = false;\n      })\n      .addCase( getGarageList.rejected, ( state ) => {\n         // state.loading = false;\n      })\n      .addCase( getWinnersList.pending, ( state ) => {\n         state.loading = true;\n      })\n      .addCase( getWinnersList.fulfilled, ( state, { payload } ) => {\n         state.garageList = payload;\n         state.loading = false;\n      })\n      .addCase( getWinnersList.rejected, ( state ) => {\n         state.loading = false;\n      })\n   }\n});\n\nexport const { \n   setGarageList,\n} = appSlice.actions;\nexport { \n   getGarageList,\n   getWinnersList,\n};\nexport default appSlice.reducer;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}