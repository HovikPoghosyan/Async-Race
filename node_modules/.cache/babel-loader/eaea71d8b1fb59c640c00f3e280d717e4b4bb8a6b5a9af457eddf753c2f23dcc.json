{"ast":null,"code":"import { createSlice, createAsyncThunk } from '@reduxjs/toolkit';\nimport { fetchGarageList, fetchWinnersList, fetchNewCar, fetchDeleteCar, fetchUpdateCar } from 'CONSTANTS/Axios';\nconst addNewCar = createAsyncThunk('list/addNewCar', async (carData, {\n  rejectWithValue,\n  dispatch\n}) => {\n  const data = await fetchNewCar(carData);\n  if (data.isFailed) return rejectWithValue();\n  dispatch(getGarageLists()).unwrap();\n  return data;\n});\nconst updateCar = createAsyncThunk('list/updateCar', async (carData, {\n  rejectWithValue,\n  dispatch\n}) => {\n  const data = await fetchUpdateCar(carData);\n  if (data !== null && data !== void 0 && data.isFailed) return rejectWithValue();\n  console.log('data: ', data);\n  dispatch(getGarageLists()).unwrap();\n  return null;\n});\nconst deleteCar = createAsyncThunk('list/deleteCar', async (id, {\n  rejectWithValue,\n  dispatch\n}) => {\n  console.log('deleting: ', id);\n  const data = await fetchDeleteCar(id);\n  if (data.isFailed) return rejectWithValue();\n  dispatch(getGarageLists()).unwrap();\n  return data;\n});\nconst getGarageLists = createAsyncThunk('list/getGarageLists', async (props, {\n  rejectWithValue,\n  dispatch\n}) => {\n  const data = await fetchGarageList();\n  if (data.isFailed) return rejectWithValue();\n  dispatch(getWinnersLists()).unwrap();\n  return data.map(item => ({\n    ...item,\n    raceStatus: 'stopped'\n  }));\n});\nconst getWinnersLists = createAsyncThunk('list/getWinnersLists', async (props, {\n  rejectWithValue\n}) => {\n  const data = await fetchWinnersList();\n  if (data.isFailed) return rejectWithValue();\n  return data;\n});\nconst initialState = {\n  garageList: [],\n  winnersList: [],\n  selectedCar: undefined,\n  loading: false\n};\nconst appSlice = createSlice({\n  name: 'list',\n  initialState,\n  reducers: {\n    setSelectedCar(state, {\n      payload\n    }) {\n      state.selectedCar = payload;\n    },\n    setRaceStatus(state, {\n      payload\n    }) {\n      const {\n        id,\n        status\n      } = payload;\n      const car = state.garageList.find(car => car.id === id);\n      car.raceStatus = status;\n    }\n  },\n  extraReducers: builder => {\n    builder.addCase(deleteCar.pending, (state, {\n      meta\n    }) => {\n      if (meta.arg == state.selectedCar.id) {\n        state.selectedCar = undefined;\n      }\n      state.loading = true;\n    }).addCase(addNewCar.pending, state => {\n      state.loading = true;\n    }).addCase(updateCar.pending, state => {\n      state.loading = true;\n    }).addCase(getGarageLists.pending, state => {\n      state.loading = true;\n    }).addCase(getGarageLists.fulfilled, (state, {\n      payload\n    }) => {\n      state.garageList = payload;\n    }).addCase(getWinnersLists.pending, state => {\n      state.loading = true;\n    }).addCase(getWinnersLists.fulfilled, (state, {\n      payload\n    }) => {\n      state.winnersList = payload.map(winner => {\n        var _car$name, _car$color;\n        const car = state.garageList.find(current => current.id === winner.id);\n        if (car !== null && car !== void 0 && car.name && car !== null && car !== void 0 && car.color) return {\n          ...winner,\n          name: (_car$name = car === null || car === void 0 ? void 0 : car.name) !== null && _car$name !== void 0 ? _car$name : 'Unknown',\n          color: (_car$color = car === null || car === void 0 ? void 0 : car.color) !== null && _car$color !== void 0 ? _car$color : '#000'\n        };\n      });\n      state.loading = false;\n    }).addCase(getWinnersLists.rejected, state => {\n      state.loading = false;\n    });\n  }\n});\nexport const {\n  setSelectedCar,\n  setRaceStatus\n} = appSlice.actions;\nexport { getGarageLists, getWinnersLists, addNewCar, updateCar, deleteCar };\nexport default appSlice.reducer;","map":{"version":3,"names":["createSlice","createAsyncThunk","fetchGarageList","fetchWinnersList","fetchNewCar","fetchDeleteCar","fetchUpdateCar","addNewCar","carData","rejectWithValue","dispatch","data","isFailed","getGarageLists","unwrap","updateCar","console","log","deleteCar","id","props","getWinnersLists","map","item","raceStatus","initialState","garageList","winnersList","selectedCar","undefined","loading","appSlice","name","reducers","setSelectedCar","state","payload","setRaceStatus","status","car","find","extraReducers","builder","addCase","pending","meta","arg","fulfilled","winner","_car$name","_car$color","current","color","rejected","actions","reducer"],"sources":["C:/Users/Admin/Documents/GitHub/Async-Race/src/store/modules/listReducer.js"],"sourcesContent":["import { createSlice, createAsyncThunk } from '@reduxjs/toolkit';\n\nimport { fetchGarageList, fetchWinnersList, fetchNewCar, fetchDeleteCar, fetchUpdateCar } from 'CONSTANTS/Axios';\n\nconst addNewCar = createAsyncThunk(\n   'list/addNewCar',\n   async ( carData, { rejectWithValue, dispatch }) => {\n      const data = await fetchNewCar( carData );\n      if ( data.isFailed ) return rejectWithValue();\n      \n      dispatch( getGarageLists() ).unwrap();\n\n      return data;\n   }\n);\n\nconst updateCar = createAsyncThunk(\n   'list/updateCar',\n   async ( carData, { rejectWithValue, dispatch }) => {\n      const data = await fetchUpdateCar( carData );\n      if ( data?.isFailed ) return rejectWithValue();\n      \n      console.log('data: ', data);\n\n      dispatch( getGarageLists() ).unwrap();\n\n      return null;\n   }\n);\n\nconst deleteCar = createAsyncThunk(\n   'list/deleteCar',\n   async ( id, { rejectWithValue, dispatch }) => {\n      console.log('deleting: ', id)\n      const data = await fetchDeleteCar( id );\n      if ( data.isFailed ) return rejectWithValue();\n      \n      dispatch( getGarageLists() ).unwrap();\n\n      return data;\n   }\n);\n\nconst getGarageLists = createAsyncThunk(\n   'list/getGarageLists',\n   async ( props, { rejectWithValue, dispatch }) => {\n      const data = await fetchGarageList();\n      if ( data.isFailed ) return rejectWithValue();\n         \n      dispatch( getWinnersLists() ).unwrap();\n\n      return data.map(( item ) => ({ ...item, raceStatus: 'stopped' }));\n   }\n);\n\nconst getWinnersLists = createAsyncThunk(\n   'list/getWinnersLists',\n   async ( props, { rejectWithValue }) => {\n      const data = await fetchWinnersList();\n      if ( data.isFailed ) return rejectWithValue();\n\n      return data;\n   }\n);\n\n\nconst initialState = {\n   garageList: [],\n   winnersList: [],\n   selectedCar: undefined,\n   loading: false,\n};\n\nconst appSlice = createSlice({\n   name: 'list',\n   initialState,\n   reducers: {\n      setSelectedCar( state, { payload } ) {\n         state.selectedCar = payload;\n      },\n      setRaceStatus( state, { payload } ) {\n         const { id, status } = payload;\n         const car = state.garageList.find( car => car.id === id );\n         car.raceStatus = status;\n      },\n   },\n   extraReducers: ( builder ) => {\n      builder\n      .addCase( deleteCar.pending, ( state, { meta } ) => {\n         if ( meta.arg == state.selectedCar.id ) {\n            state.selectedCar = undefined;\n         }\n         state.loading = true;\n      })\n      .addCase( addNewCar.pending, ( state ) => {\n         state.loading = true;\n      })\n      .addCase( updateCar.pending, ( state ) => {\n         state.loading = true;\n      })\n      .addCase( getGarageLists.pending, ( state ) => {\n         state.loading = true;\n      })\n      .addCase( getGarageLists.fulfilled, ( state, { payload } ) => {\n         state.garageList = payload;\n      })\n      .addCase( getWinnersLists.pending, ( state ) => {\n         state.loading = true;\n      })\n      .addCase( getWinnersLists.fulfilled, ( state, { payload } ) => {\n         state.winnersList = payload.map( winner => {\n            const car = state.garageList.find( current => current.id === winner.id );\n            if ( car?.name && car?.color ) return {\n               ...winner,\n               name: car?.name ?? 'Unknown',\n               color: car?.color ?? '#000',\n            };\n         }) ;\n         state.loading = false;\n      })\n      .addCase( getWinnersLists.rejected, ( state ) => {\n         state.loading = false;\n      })\n   }\n});\n\nexport const { \n   setSelectedCar,\n   setRaceStatus,\n} = appSlice.actions;\nexport { \n   getGarageLists,\n   getWinnersLists,\n   addNewCar,\n   updateCar,\n   deleteCar,\n};\nexport default appSlice.reducer;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}